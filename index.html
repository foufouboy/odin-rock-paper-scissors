<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>My Rock-Paper-Scissors UI</h1>
    </header>
    <div class="buttons-container">
        <button class="rock">Rock</button>
        <button class="paper">Paper</button>
        <button class="scissors">Scissors</button>
    </div>
    <div class="results">
        <div class="user score">
            <p>Your Score :</p>
            <p class="score-n">0</p>
        </div>
        <div class="middle-score">
           <button>New game!</button>
           <p></p>
        </div>
        <div class="comp score">
            <p>Comp Score :</p>
            <p class="score-n">0</p>
        </div>
    </div>

    <script>
        // My code

        function getComputerChoice() {return Math.floor(Math.random() * 3);}
        function endGame() {

            rock.removeEventListener("click", rockPlayed);
            paper.removeEventListener("click", paperPlayed);
            scissors.removeEventListener("click", scissorsPlayed);

            newGame.style.display = "initial";

            (playerScore === 5) ? middleScorePara.textContent = "You win the game!" : 
                middleScorePara.textContent = "The computer wins the game!";

            
            
        }

        const newGame = document.querySelector(".results button");
        newGame.addEventListener("click", game);

        const rock = document.querySelector(".rock");
        const paper = document.querySelector(".paper");
        const scissors = document.querySelector(".scissors");

        const userScore = document.querySelector(".user .score-n");
        const compScore = document.querySelector(".comp .score-n")

        const middleScorePara = document.querySelector(".middle-score p");
        
        let playerScore = 0,
            computerScore = 0;

        const rockPlayed = (e) => {
            playRound(0, getComputerChoice());
        }

        const paperPlayed = (e) => {
            playRound(1, getComputerChoice());
        }

        const scissorsPlayed = (e) => {
            playRound(2, getComputerChoice());
        }


        function playRound(playerChoice, computerChoice) {

            if ((playerChoice + 1) % 3 === computerChoice) {
                middleScorePara.textContent = "The computer wins!";
                compScore.textContent = ++computerScore;
            } else if ((computerChoice + 1) % 3 === playerChoice) {
                middleScorePara.textContent = "You win!";
                userScore.textContent = ++playerScore;
            } else {
                middleScorePara.textContent = "It's a draw!";
            }

            if (playerScore === 5 || computerScore === 5) {
                endGame();
            }
            
        }

        function game() {

            newGame.style.display = "none";
            userScore.textContent = "0";
            compScore.textContent = "0";
            middleScorePara.textContent = "";
            playerScore = computerScore = 0;

            rock.addEventListener("click", rockPlayed);
            paper.addEventListener("click", paperPlayed);
            scissors.addEventListener("click", scissorsPlayed);

        }

        
        // 1: Quand le bouton new game est cliqué, on démarre le jeu
        // 2: Quand un bouton de choix est cliqué, on récupère sa valeur
        // 3: On génère celle de l'ordinateur
        // 4: On calcule qui a gagné
        // 5: On fait ça jusqu'à ce qu'un des joueurs soit à 5
        // 6: Après quoi on affiche qui a gagné, et le bouton pour démarrer une nouvelle
        // partie

        // game();


    </script>

</body>
</html>
